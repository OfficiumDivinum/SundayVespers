
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.6">
    
    
      
        <title>Sunday Vespers</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.875de78c.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.f1a3b89f.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    <script>function __prefix(e){return new URL(".",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#usage" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Sunday Vespers" class="md-header__button md-logo" aria-label="Sunday Vespers" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Sunday Vespers
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Usage
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="" type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 10a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2m10-3a5 5 0 0 1 5 5 5 5 0 0 1-5 5H7a5 5 0 0 1-5-5 5 5 0 0 1 5-5h10M7 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3h10a3 3 0 0 0 3-3 3 3 0 0 0-3-3H7z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent="" type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Sunday Vespers" class="md-nav__button md-logo" aria-label="Sunday Vespers" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Sunday Vespers
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Usage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        Usage
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getting-the-booklets" class="md-nav__link">
    Getting the booklets
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#technical-description" class="md-nav__link">
    Technical Description
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modifying-the-typography" class="md-nav__link">
    Modifying the typography
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modifying-an-extant-booklet" class="md-nav__link">
    Modifying an extant booklet
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-new-booklet" class="md-nav__link">
    Creating a new booklet
  </a>
  
    <nav class="md-nav" aria-label="Creating a new booklet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#with-cookiecutter-preferred" class="md-nav__link">
    With Cookiecutter (preferred)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manually" class="md-nav__link">
    Manually
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-content" class="md-nav__link">
    Adding Content
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getting-the-booklets" class="md-nav__link">
    Getting the booklets
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#technical-description" class="md-nav__link">
    Technical Description
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modifying-the-typography" class="md-nav__link">
    Modifying the typography
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modifying-an-extant-booklet" class="md-nav__link">
    Modifying an extant booklet
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-new-booklet" class="md-nav__link">
    Creating a new booklet
  </a>
  
    <nav class="md-nav" aria-label="Creating a new booklet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#with-cookiecutter-preferred" class="md-nav__link">
    With Cookiecutter (preferred)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manually" class="md-nav__link">
    Manually
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-content" class="md-nav__link">
    Adding Content
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="usage">Usage</h1>
<h2 id="getting-the-booklets">Getting the booklets</h2>
<p>All booklets are available as
<a href="https://github.com/St-Josephs-Gateshead/SundayVespers/releases">releases</a> allowing
you to select the desired version (hint: unless you need conformity with an
older pagination, you probably just want the latest).  The remainder of this
documentation is for people who want to <em>edit</em> the booklets, or make new
booklets.</p>
<h2 id="technical-description">Technical Description</h2>
<p>This repository is not fully automated.  (A fully automated solution for
producing booklets to sing <em>any</em> office is planned as part of the 
<a href="https://github.com/OfficiumDivinum">OfficiumDivinum</a> project.)  Instead it aims
to make producing booklets by hand as little tedious as possible.  Every booklet
is in a self-contained directory, with a main latex file (<code>vespers.tex</code>), a file
for the propers <code>propers.tex</code> and, optionally, a file containing the psalms
(<code>psalms.tex</code>), and a makefile which handles building the booklet.</p>
<p>No output files are committed to version control.  Rather, on every push to
master (which includes every pull request) the entire repository is rebuilt with
Github Actions<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup>.  If the push is <em>tagged</em>, a release is created with all the
pdfs attached; if not they are available as run artefacts from the 'Actions' tab
on github. In this way one does not need texlive/gregorio installed locally, and
output is consistent.</p>
<h2 id="modifying-the-typography">Modifying the typography</h2>
<p>To change the layout, edit <code>vespers.tex</code>.  It is a very standard LaTeX file
using <code>memoir</code>, so modification should be easy.  I have deliberately not tried
to provide a general solution for every use case, so occasional manual input to
prevent ugly typography may be required.</p>
<p>If the modification is designed to be <em>universal</em>, you will have to delete and
replace <code>vespers.tex</code> in every single directory.  Please do not be tempted to
symlink: it is important to be able to intervene manually as required.  TeX is
designed to <em>help</em> human typesetters, not to <em>replace</em> them.</p>
<h2 id="modifying-an-extant-booklet">Modifying an extant booklet</h2>
<p>If you have spotted a mistake in a booklet, or just want to change something in
the <em>content</em>, edit <code>propers.tex</code> (or <code>psalms.tex</code>).  These files provide the
macros which are substituted into <code>vespers.tex</code> at compile time.  If you want to
edit a <em>chant</em>, edit the corresponding <code>.gabc</code> file, as described below.</p>
<p>If you have only a small change, the easiest way is to find the file in
question in github's web interface, click the pencil icon to edit the file, edit
as required, and then enter a short description of the change and commit.</p>
<h2 id="creating-a-new-booklet">Creating a new booklet</h2>
<h3 id="with-cookiecutter-preferred">With Cookiecutter (preferred)</h3>
<p>Install <a href="https://github.com/cookiecutter/cookiecutter">cookiecutter</a> if you do
not already have it.</p>
<pre><code class="language-bash">cookiecutter vespers-template -o vespers/
</code></pre>
<p>And enter a name for the feast.  This will create a directory with a sensible
name and populate it with the correct files.</p>
<h3 id="manually">Manually</h3>
<p>Copy <code>vespers-template/{{cookiecutter.project_slug}}</code> to a sensibly named
directory.  Insert the feast name in <code>propers.tex</code>.</p>
<h2 id="adding-content">Adding Content</h2>
<ol>
<li>
<p>Begin by collecting all the antiphons, and saving the <code>.gabc</code> files as
   <code>antN.gabc</code> (e.g. <code>ant1.gabc</code>).  Most everything gregorian can be found at
   <a href="http://gregobase.selapa.net">gregobase</a>.</p>
</li>
<li>
<p>Ensure the mode <em>and termination</em> is specified in the antiphon file. The
   termination should be in the <code>mode-differentia</code> field, as according to the
   <a href="http://gregorio-project.github.io/gabc/">gregorio documentation</a> this
   expresses: </p>
<blockquote>
<p>The mode or tone differentia of the piece. Typically, this expresses the
variant of the psalm tone to use for the piece.</p>
</blockquote>
</li>
<li>
<p>Run <code>../../psalm_parser.py antN.gabc PSALM_NAME</code> for every antiphon. This
   will parse the antiphon file, find the right psalm in the relevant mode,
   format it correctly and drop the resulting .gabc file in the current
   directory with the correct name.  <code>PSALM_NAME</code> is the name of the psalm as in
   the <code>psalms/</code> directory.  If you want the solemn version of the tone add
   <code>--solemn</code>.</p>
</li>
<li>
<p>Add translations for everything.  I know of no reliable source of
   translations at the moment, although OfficiumDivinum aspires to become one.
   Thus I generally translate myself, or edit some available source.</p>
</li>
<li>
<p>Optionally, compile locally by running <code>make</code> in the directory to check
   everything works.</p>
</li>
<li>
<p>Push upstream with a new tag to generate a new release (if you have not
   checked locally, perhaps push <em>without</em> a tag first to check it works).  If
   you do not have push access, open a pull request and one of the admins will
   merge it.</p>
</li>
</ol>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>We use the excellent texlive docker image maintained by <a href="https://github.com/xu-cheng/texlive-action">Xu
Cheng</a>. TexLive now has a recent
gregorio in it.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": ".", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "assets/javascripts/workers/search.d351de03.min.js", "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.34eae1b6.min.js"></script>
      
    
  </body>
</html>